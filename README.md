<div align="center" style="text-align: center;">

![Cobblestone logo](cobblestone-logo.png)
# Cobblestone
**Modern static site framework and generator**

[Getting started](#getting-started) Â· [Features](#features) Â· [Package scripts](#package-scripts) Â· [Project structure](#project-structure) Â· [Recipes](#recipes) Â· [FAQ](#faq)

---

</div>

## Getting started

Clone this repository and use it as a boilerplate. CLI utility for project scaffolding is WIP.

<!-- 1. Install **Cobblestone CLI**
    ```
    $ yarn global add @pebbleroad/cobblestone-cli
    ```
1. Create a new Cobblestone project
    ```
    $ cobblestone create my-project
    ``` -->

## Features
- ğŸ“¦&ensp;[**Webpack**](https://webpack.js.org/) for dev server and production build
- ğŸ–¼&ensp;[**Vue.js**](https://vuejs.org) for routing, views, and components
- âš¡ï¸&ensp;[**Prerenderer**](https://github.com/chrisvfritz/prerender-spa-plugin/) for static-site generation from a SPA
- ğŸ¨&ensp;[**Sass**](https://sass-lang.com/), [**Scarab**](https://scarab.style), [**PostCSS**](https://github.com/postcss/postcss) for styling
- ğŸ¤–&ensp;[**Babel**](https://babeljs.io/), [**ES6+**](https://www.ecma-international.org/ecma-262/6.0/) for writing JavaScript
- ğŸ“–&ensp;[**Storybook**](https://storybook.js.org) for UI component development environment
- âœ…&ensp;[**Jest**](https://jestjs.io/), [**Cypress**](https://cypress.io) and [**Backstop**](https://github.com/garris/BackstopJS) for testing
- ğŸ’„&ensp;[**Prettier**](https://prettier.io/) for opinionated code formatting
- ğŸ“‚&ensp;Opinionated folder structure for separation of concerns
- ğŸ‘»&ensp;Bring-your-own headless CMS

## Package scripts

| `$ yarn` | Description |
| :-- | :-- |
| `dev` | Start the app development server: <br>[**`localhost:3000/`**](http://localhost:3000/) |
| `fetch` | Fetch data from the CMS and write to `src/data/`  |
| `build` | Generate the optimized production app build in `dist/` |
| `serve` | Serve the `dist/` folder locally: <br>[**`localhost:3333/`**](http://localhost:3333/) |
| `analyze` | Run and display an analysis of the Webpack app bundle size |
| `storybook` | Start the Storybook development server: <br>[**`localhost:4000/`**](http://localhost:4000/) |
| `storybook:build` | Export a static Storybook to `.storybook/dist` |
| `storybook:serve` | Serve the `.storybook/dist/` folder locally: <br>[**`localhost:4444/`**](http://localhost:4444/) |
| `test` | Run all Jest, Cypress and Backstop tests |
| `â”œâ”€ test:cypress` | Run all Cypress tests |
| `â”œâ”€ test:jest` | Run all Jest tests |
| `â””â”€ test:backstop` | Run all Backstop tests |
| `cypress:open` | Open the Cypress dashboard |
| `backstop:open` | Open the Backstop VRT report |
| `backstop:approve` | Approve the current Backstop snapshots |

## Project structure

### &ensp;`âœ¨ src/`

**Project source files**

The `src/` folder contains the project source files. These files are processed by Webpack's dev server or build system (depending on the current `NODE_ENV`). Only the production build contains optimized assets.

<details>
<summary><strong>View <code>src/</code> folder structure</strong></summary>

| | File / Folder | Description |
| :-- | :-- | :-- |
| ğŸ“ | `src/` | Project source files |
| ğŸ“ | `â”œâ”€â”€ app/` | App files |
| ğŸ“„ | `â”‚Â Â Â â”œâ”€â”€ App.vue` | Root App component |
| ğŸ“„ | `â”‚Â Â Â â”œâ”€â”€ index.js` | Application entry point |
| ğŸ“„ | `â”‚Â Â Â â”œâ”€â”€ plugins.js` | Vue plugin configuration |
| ğŸ“„ | `â”‚Â Â Â â”œâ”€â”€ routes.js` | App route configuration |
| ğŸ“ | `â”‚Â Â Â â””â”€â”€ views/` | App views |
| ğŸ“ | `â”œâ”€â”€ components/` | Vue components |
| ğŸ“ | `â”œâ”€â”€ assets/` | Static asset files |
| ğŸ“„ | `â”‚Â Â Â â”œâ”€â”€ favicon.png` | Site favicon file |
| ğŸ“ | `â”‚Â Â Â â”œâ”€â”€ fonts/` | Webfont files |
| ğŸ“ | `â”‚Â Â Â â””â”€â”€ images/` | Image files |
| ğŸ“ | `â”œâ”€â”€ data/` | JSON data files |
| ğŸ“ | `â”œâ”€â”€ public/` | Static public assets |
| ğŸ“„ | `â”‚Â Â Â â””â”€â”€ index.html` | Main `index.html` file for SPA |
| ğŸ“ | `â”œâ”€â”€ scripts/` | Global scripts |
| ğŸ“ | `â””â”€â”€ styles/` | Sass stylesheets |
| ğŸ“ | `â€Œâ€Œ Â Â Â â”œâ”€â”€ config/` | Stylesheet configuration |
| ğŸ“ | `â€Œâ€Œ Â Â Â â”œâ”€â”€ tokens/` | Design token configuration |
| ğŸ“ | `â€Œâ€Œ Â Â Â â”œâ”€â”€ typography/` | Global typography styles |
| ğŸ“„ | `â€Œâ€Œ Â Â Â â”œâ”€â”€ base.scss` | Global base styles |
| ğŸ“„ | `â€Œâ€Œ Â Â Â â”œâ”€â”€ carapace.scss` | Carapace entry point |
| ğŸ“„ | `â€Œâ€Œ Â Â Â â”œâ”€â”€ reset.scss` | CSS reset/normalize styles |
| ğŸ“„ | `â€Œâ€Œ Â Â Â â””â”€â”€ style.scss` | Main stylesheet entry point |

</details>

---

### `ğŸ dist/`
**Optimized production build**

The `dist/` folder is generated by the Webpack build system.

<details>
<summary><strong>View list of optimizations</strong></summary>
</details>

---

### `â˜‘ï¸ tests/`
**Test configuration**

The `tests/` folder contains configuration and supporting files for Jest, Cypress and Backstop.

<details>
<summary><strong>View <code>tests/</code> folder structure</strong></summary>
</details>

---

### `âš™ï¸ webpack/`
**Webpack configuration**

The `webpack/` folder contains configuration files for Webpack. Configuration is split across different targets (build, production and analyze), with a base configuration file that is merged via [`webpack-merge`](https://github.com/survivejs/webpack-merge).

---

### `ğŸ“– .storybook/`
**Storybook configuration**

The `storybook/` folder contains Storybook configuration files and folders.

---

### `ğŸ’¼ lib/`
**Internal project utilities**

The `lib/` folder is meant for customized internal scripts and utilities that may be used on a per-project basis. (e.g. a project may require a custom parser for a specific data schema)

---

## Recipes

### Configuring app routes

Routes (i.e. URL's) for the app are defined in `src/app/routes.js`. Visit the  [Vue router documentation](https://router.vuejs.org/) for more information.

### Creating router views

Vue components in `src/app/views/` serve as router views.

### Managing design tokens

Design tokens are defined in `src/styles/tokens/`.

Cobblestone's Webpack configuration makes it possible to use Scarab's design tokens and helper functions anywhere in the `src/styles/` folder and also in Vue SFC files.

### Creating new components

To create a new component called `ComponentName`, create the following files:

- `src/components/ComponentName/ComponentName.md`
- `src/components/ComponentName/ComponentName.stories.js`
- `src/components/ComponentName/ComponentName.test.js`
- `src/components/ComponentName/ComponentName.vue`

CLI utility for component scaffolding is WIP.

### Writing component stories

Refer to the [Storybook documentation](https://storybook.js.org/basics/guide-vue/#write-your-stories) and example component story for now.

### Writing and running tests

WIP.

### Configuring Webpack

WIP.

## FAQ
- How to make Vue devtools work in Storybook?  
  https://github.com/vuejs/vue-devtools/blob/master/shells/electron/README.md
